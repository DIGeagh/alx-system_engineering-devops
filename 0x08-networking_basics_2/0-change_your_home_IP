#!/usr/bin/env bash
# This script configures an Ubuntu server with custom DNS resolutions for localhost and facebook.com.

# Define the custom DNS resolutions
LOCALHOST_IP="127.0.0.2"
FACEBOOK_IP="8.8.8.8"

# Check if the existing localhost entry is present and modify it, otherwise add a new entry
if grep -q "^\s*127\.0\.0\.1\s\+localhost\s*$" /etc/hosts; then
    sudo sed -i "s/^\(\s*127\.0\.0\.1\s\+\)localhost\s*$/\1localhost ${LOCALHOST_IP}/" /etc/hosts
else
    echo -e "127.0.0.1\tlocalhost ${LOCALHOST_IP}" | sudo tee -a /etc/hosts
fi

# Check if the existing facebook.com entry is present and modify it, otherwise add a new entry
if grep -q "^\s*facebook\.com\s\+" /etc/hosts; then
    sudo sed -i "s/^\(\s*facebook\.com\s\+\).*/\1${FACEBOOK_IP}/" /etc/hosts
else
    echo -e "${FACEBOOK_IP}\tfacebook.com" | sudo tee -a /etc/hosts
fi
